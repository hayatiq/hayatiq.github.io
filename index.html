<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <title>Hayatiq — Handcrafted with Intention</title>
        <meta name="description" content="Hayatiq — Handmade beauty products with a calming, premium aesthetic.">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600&family=Dancing+Script:wght@600;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css" integrity="sha512-DxV+EoADOkOygM4IR9yXP8Sb2qwgidEmeqAEmDKIOfPRQZOWbXCzLC6vjbZyy0vPisbH2SyW27+ddLVCN+OMzQ==" crossorigin="anonymous" referrerpolicy="no-referrer">
        <link rel="stylesheet" href="./css/style.css">
    </head>
    <body>
        <header class="site-header">
            <div class="container nav">
                <a href="#/" class="brand" aria-label="Hayatiq Home">
                <span class="brand-logo" aria-hidden="true"></span>
                <span class="brand-name">HAYATIQ</span>
                </a>
                <div class="nav-right">
                <a href="#/cart" aria-label="Cart" class="cart-link">
                    <span class="cart">
                    <svg width="26" height="26" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M6 6h15l-2 9H8L6 2H2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                        <circle cx="9" cy="21" r="1" fill="currentColor" />
                        <circle cx="18" cy="21" r="1" fill="currentColor" />
                    </svg>
                    <span class="cart-count" id="cartCount">0</span>
                    </span>
                </a>
                <button class="mobile-nav-toggle" id="navToggle" aria-expanded="false" aria-controls="primaryNav">
                    <span class="hamburger" aria-hidden="true">
                    <span></span>
                    </span>
                    <span class="visually-hidden">Toggle navigation</span>
                </button>
                </div>
                <nav class="nav-links" id="primaryNav" aria-label="Primary">
                <a href="#/products" data-link>Products</a>
                <a href="#/categories" data-link>Categories</a>
                <a href="#/about" data-link>About</a>
                <a href="#/contact" data-link>Contact</a>
                <a href="#/cart" aria-label="Cart" class="desktop-cart">
                    <span class="cart">
                    <svg width="26" height="26" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M6 6h15l-2 9H8L6 2H2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                        <circle cx="9" cy="21" r="1" fill="currentColor" />
                        <circle cx="18" cy="21" r="1" fill="currentColor" />
                    </svg>
                    <span class="cart-count" id="cartCount">0</span>
                    </span>
                </a>
                </nav>
            </div>
        </header>
        <main id="app" class="container" tabindex="-1">
            <section id="view-home" class="view active" aria-label="Homepage">
                <div class="hero">
                    <div class="hero-wrap">
                        <div class="hero-card">
                            <h1>HAYATIQ</h1>
                            <p class="muted">Handcrafted with intention. Natural wellness products for your everyday rituals, gentle, mindful, and designed to nurture over time, because true wellness is a lifestyle, not a rush.</p>
                            <div class="hero-cta">
                                <a href="#/products" class="btn button-primary">Discover our products</a>
                            </div>
                        </div>
                    </div>
                </div>
                <section aria-label="Featured Products">
                    <div class="section-title">
                        <h2>Featured Products</h2>
                        <a href="#/products" class="button-ghost btn">View All</a>
                    </div>
                    <div class="products-grid" id="featuredGrid"></div>
                </section>
                <section aria-label="About Hayatiq">
					<div>
						<div class="soft-card">
							<h2>Why HAYATIQ?</h2>
							<p>We believe wellness should be gentle, honest, and effective. Each product is handcrafted in small batches using thoughtfully sourced ingredients. We create products we love to use ourselves, minimal formulas that let your natural glow shine.</p>
						</div>
                    </div>
                </section>
                <section aria-label="How It Works">
                    <div class="section-title">
                        <h2>How It Works</h2>
                    </div>
                    <div class="grid" style="grid-template-columns:repeat(1,minmax(0,1fr));gap:.9rem">
                        <div class="soft-card">
                            <strong>1. Source</strong>
                            <p>We select premium natural ingredients from trusted partners.</p>
                        </div>
                        <div class="soft-card">
                            <strong>2. Craft</strong>
                            <p>Small‑batch production preserves potency and reduces waste.</p>
                        </div>
                        <div class="soft-card">
                            <strong>3. Test</strong>
                            <p>Each batch is tested for quality, stability, and safety.</p>
                        </div>
                        <div class="soft-card">
                            <strong>4. Wrap</strong>
                            <p>Minimalistic packaging keeps it simple and beautiful.</p>
                        </div>
                    </div>
                </section>
                <section aria-label="Contact teaser">
                    <div class="soft-card">
                        <h2>Let’s Talk</h2>
                        <p>Have a question about our blends? We’d love to hear from you.</p>
                        <a class="btn button-primary" href="#/contact">Contact Us</a>
                    </div>
                </section>
            </section>
            <section id="view-products" class="view" aria-label="Product Listing">
                <div class="section-title">
                    <h2>Products</h2>
                    <div class="pill" id="productCount">0 items</div>
                </div>
                <div class="products-grid" id="productsGrid"></div>
            </section>
            <section id="view-detail" class="view" aria-label="Product Detail">
                <div class="detail" id="detailWrap"></div>
            </section>
            <section id="view-categories" class="view" aria-label="Categories">
                <div class="section-title">
                    <h2>Categories</h2>
                </div>
                <div class="grid" style="grid-template-columns:repeat(1,minmax(0,1fr))">
                    <a class="soft-card" href="#/products?cat=Skincare">
                        <div style="display:flex;align-items:center;gap:.8rem">
                            <span class="icon-img">
                                <img alt="Skincare icon" src="./images/skincare.png">
                            </span>
                            <div>
                                <strong>Skincare</strong>
                                <p class="muted">Cleansers, serums, moisturizers</p>
                            </div>
                        </div>
                    </a>
                    <a class="soft-card" href="#/products?cat=Haircare">
                        <div style="display:flex;align-items:center;gap:.8rem">
                            <span class="icon-img">
                                <img alt="Haircare icon" src="./images/hair.png">
                            </span>
                            <div>
                                <strong>Haircare</strong>
                                <p class="muted">Oils, masks, scalp care</p>
                            </div>
                        </div>
                    </a>
                    <a class="soft-card" href="#/products?cat=Wellness">
                        <div style="display:flex;align-items:center;gap:.8rem">
                            <span class="icon-img">
                                <img alt="Wellness icon" src="./images/meditation.png">
                            </span>
                            <div>
                                <strong>Wellness</strong>
                                <p class="muted">Balms, bath, aromas</p>
                            </div>
                        </div>
                    </a>
                </div>
            </section>
            <section id="view-about" class="view" aria-label="About">
                <div class="soft-card">
                    <h2>Our Story</h2>
                    <p>Born from a love of simple rituals, HAYATIQ crafts handmade beauty with a minimal, elegant touch. Our blends are inspired by nature and designed to soothe both skin and mind.</p>
                </div>
            </section>
            <section id="view-contact" class="view" aria-label="Contact">
                <div class="soft-card">
                    <div style="display:flex;align-items:center;justify-content:space-between;gap:.8rem;flex-wrap:wrap">
                        <h2>Contact Us</h2>
                        <a class="btn button-ghost" href="https://facebook.com/hayatiq.life" target="_blank" rel="noopener">Facebook Page →</a>
                    </div>
                    <form action="https://formsubmit.co/hayatiq.life@gmail.com" class="contact" method="POST" id="contactForm">
                        <input type="hidden" name="_captcha" value="true">
                        <input type="hidden" name="_template" value="table">
                        <input type="text" name="_honey" style="display:none">
                        <div class="field">
                            <label for="name">Name</label>
                            <input id="name" name="name" placeholder="Your full name">
                        </div>
                        <div class="field">
                            <label for="contact">Phone or Email</label>
                            <input id="contact" name="email_or_phone" placeholder="e.g., +8801..., or name@email.com" required>
                        </div>
                        <div class="field">
                            <label for="message">Message</label>
                            <textarea id="message" name="message" rows="5" placeholder="How can we help?" required></textarea>
                        </div>
                        <button class="btn button-primary" type="submit">Send Message</button>
                    </form>
                    <div id="formMessage" style="margin-top:1rem;display:none"></div>
                </div>
            </section>
            <section id="view-cart" class="view" aria-label="Cart">
                <div class="soft-card">
                    <h2>Your Cart</h2>
                    <div id="cartItems"></div>
                    <div style="display:flex;align-items:center;justify-content:space-between;margin-top:.8rem">
                        <strong>Total:</strong>
                        <strong id="cartTotal">৳0.00</strong>
                    </div>
                    <div style="margin-top:.8rem;display:flex;gap:.6rem;flex-wrap:wrap">
                        <button class="btn button-ghost" onclick="clearCart()">Clear Cart</button>
                        <a class="btn button-primary" href="#/checkout">Checkout</a>
                    </div>
                </div>
            </section>
            <section id="view-checkout" class="view" aria-label="Checkout">
                <div class="soft-card">
                    <h2>Checkout</h2>
                    <form action="https://formsubmit.co/hayatiq.life@gmail.com" method="POST" id="checkoutForm" class="checkout-form">
                        <input type="hidden" name="_captcha" value="true">
                        <input type="hidden" name="_template" value="table">
                        <input type="text" name="_honey" style="display:none">
                        <input type="hidden" name="cart_items" id="cartItemsData">
                        <input type="hidden" name="subtotal" id="subtotalData">
                        <input type="hidden" name="shipping" id="shippingData">
                        <input type="hidden" name="total" id="totalData">

                        <div class="field">
                            <label for="checkoutName">Full Name *</label>
                            <input id="checkoutName" name="name" required>
                        </div>
                        <div class="field">
                            <label for="checkoutPhone">Phone Number *</label>
                            <input id="checkoutPhone" name="phone" type="tel" required>
                        </div>
                        <div class="field">
                            <label for="checkoutAddress">Delivery Address *</label>
                            <textarea id="checkoutAddress" name="address" rows="3" required></textarea>
                        </div>

                        <div class="shipping-field">
                            <label>Shipping Method *</label>
                            <div class="shipping-options">
                                <label class="shipping-option">
                                <input type="radio" name="shipping_method" value="inside_dhaka" checked onchange="updateShipping()">
                                <span>Inside Dhaka</span>
                                <span class="price">৳80</span>
                                </label>

                                <label class="shipping-option">
                                <input type="radio" name="shipping_method" value="outside_dhaka" onchange="updateShipping()">
                                <span>Outside Dhaka</span>
                                <span class="price">৳130</span>
                                </label>
                            </div>
                        </div>


                        <h3 class="order-summary-title">Order Summary</h3>
                        <div id="checkoutItems" class="checkout-items"></div>

                        <div class="soft-card checkout-summary">
                            <div class="summary-row">
                            <span>Subtotal:</span>
                            <span id="checkoutSubtotal">৳0.00</span>
                            </div>
                            <div class="summary-row">
                            <span>Delivery:</span>
                            <span id="checkoutShipping">৳80.00</span>
                            </div>
                            <div class="summary-total">
                            <span>Total:</span>
                            <span id="checkoutTotal">৳0.00</span>
                            </div>
                        </div>

                        <div class="field">
                            <div>
                                <label for="orderNote">Order Note (Optional)</label>
                                <small class="note-chars" id="noteChars">0/200</small>
                            </div>
                            <textarea id="orderNote" name="order_note" rows="2" maxlength="200" placeholder="Any special instructions?"></textarea>
                        </div>

                        <button class="btn button-primary checkout-submit" style="margin-top: 10px;" type="submit">Place Order</button>
                    </form>
                </div>
            </section>
        </main>
        <footer>
            <div class="container footer-grid">
                <div class="footer-col">
                    <div class="brand" style="margin-bottom:.6rem">
                        <span class="brand-logo" aria-hidden="true"></span>
                        <span class="brand-name">HAYATIQ</span>
                    </div>
                    <p class="muted">Handcrafted with intention. Natural wellness products for your everyday rituals.</p>
                </div>
                <div class="footer-col">
                    <strong>Explore</strong>
                    <div style="display:grid;margin-top:.4rem;gap:.3rem">
                        <a href="#/about">About</a>
                        <a href="#/products">Products</a>
                        <a href="#/categories">Categories</a>
                    </div>
                </div>
                <div class="footer-col">
                    <strong>Social</strong>
                    <div class="socials" style="margin-top:.4rem">
                        <a href="https://instagram.com/hayatiqlife" target="_blank" aria-label="Instagram" rel="noopener">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <rect x="3" y="3" width="18" height="18" rx="5" stroke="currentColor" stroke-width="1.5" />
                                <circle cx="12" cy="12" r="4.5" stroke="currentColor" stroke-width="1.5" />
                                <circle cx="17.5" cy="6.5" r="1" fill="currentColor" />
                            </svg>
                        </a>
                        <a href="https://facebook.com/hayatiq.life" target="_blank" aria-label="Facebook" rel="noopener">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M14 9h3V6h-3a4 4 0 0 0-4 4v2H7v3h3v6h3v-6h3l1-3h-4v-2a1 1 0 0 1 1-1Z" fill="currentColor" />
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
            <div class="container" style="padding-bottom:1rem;font-size:.85rem;text-align:center">© <span id="year"></span> HAYATIQ. All rights reserved. Handcrafted with Intention. </div>
        </footer>
        <script src="./js/script.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
        <script>
            document.getElementById("contactForm").addEventListener("submit", function(e) {
                e.preventDefault();
                const form = e.target;
                const messageBox = document.getElementById("formMessage");
                // === Rate Limiting with localStorage ===
                const limitKey = "contactFormSubmissions";
                const now = Date.now();
                let submissions = JSON.parse(localStorage.getItem(limitKey)) || [];
                // Remove old submissions (older than 1 hour)
                submissions = submissions.filter(
                    (timestamp) => now - timestamp < 3600000);
                localStorage.setItem(limitKey, JSON.stringify(submissions));
                if (submissions.length >= 3) {
                    messageBox.style.display = "block";
                    messageBox.style.color = "red";
                    messageBox.textContent = "⚠️ You have reached your submission limit. Please try again later.";
                    setTimeout(() => {
                        window.location.hash = "/products";
                    }, 5000);
                    return;
                }
                // === Send via FormSubmit AJAX ===
                axios.post("https://formsubmit.co/ajax/hayatiq.life@gmail.com", new FormData(form)).then((response) => {
                    // Record submission timestamp
                    submissions.push(now);
                    localStorage.setItem(limitKey, JSON.stringify(submissions));
                    // Show success message
                    messageBox.style.display = "block";
                    messageBox.style.color = "green";
                    messageBox.textContent = "✅ We have received your message and will get back to you soon. Redirecting...";
                    // Redirect after short delay
                    setTimeout(() => {
                        messageBox.textContent = "";
                        messageBox.style.display = "none";
                        window.location.hash = "/products";
                    }, 5000);
                    form.reset();
                }).catch((error) => {
                    // Show error message
                    messageBox.style.display = "block";
                    messageBox.style.color = "red";
                    messageBox.textContent = "❌ Something went wrong. Please try again later.";
                });
            });

            // checkout form submit
            document.getElementById("checkoutForm").addEventListener("submit", function(e) {
                e.preventDefault();
                const form = e.target;
                const limitKey = "checkoutOrders";
                const now = Date.now();
                let orders = JSON.parse(localStorage.getItem(limitKey)) || [];
                const cart = getCart();
                 // Cart validation
                if (cart.length === 0) {
                    toast("Your cart is empty");
                    return;
                }

                const phone = document.getElementById('checkoutPhone').value;
  
                // Phone validation
                const phoneRegex = /^01[3-9]\d{8}$/;

                if (!phoneRegex.test(phone)) {
                    toast("Please enter a valid Bangladeshi phone number");
                    return;
                }
                // Remove old orders (older than 20 minutes)
                orders = orders.filter(timestamp => now - timestamp < 1200000);
                localStorage.setItem(limitKey, JSON.stringify(orders));
                
                if (orders.length >= 5) {
                    toast("Order limit reached. Please try again in 20 minutes.", 'warning');
                    return;
                }
                
                axios.post("https://formsubmit.co/ajax/hayatiq.life@gmail.com", new FormData(form)).then((response) => {
                    // Save form data for next time
                    saveFormData();
                    // Record order timestamp
                    orders.push(now);
                    localStorage.setItem(limitKey, JSON.stringify(orders));
                    
                    // Clear cart and show success
                    clearCart();
                    toastBox("Order placed successfully! 😊");
                    
                    
                    setTimeout(() => {
                        form.reset();
                        window.location.hash = "/products";
                    }, 3000);
                    
                }).catch((error) => {
                    toast("Error placing order. Please try again.");
                });
            });
        </script>
    </body>
</html>